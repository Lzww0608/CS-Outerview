# Q134.判断两个时间是否是同一周.md

```cpp
#include <iostream>
#include <ctime>

// 计算给定时间戳所在周的周一零点的Unix时间戳（基于UTC）
time_t get_utc_monday_of_week(time_t timestamp) {
    // 转换为UTC时间的tm结构体
    struct tm* tm_info = gmtime(&timestamp);
    if (!tm_info) {
        return 0; // 错误处理
    }

    // tm_wday: 0=Sunday, 1=Monday, ..., 6=Saturday
    // ISO 8601 标准认为周一是一周的开始
    // 计算要倒退的天数：如果 tm_wday 是 0（周日），则需要倒退 6 天
    // 如果是 1-6（周一到周六），则需要倒退 tm_wday - 1 天
    int days_to_subtract = (tm_info->tm_wday == 0) ? 6 : tm_info->tm_wday - 1;

    // 减去天数，并将时分秒清零，得到本周周一零点的时间戳
    timestamp -= days_to_subtract * 24 * 60 * 60;

    // 将 tm_info 更新到周一的日期，并清除时分秒信息
    tm_info = gmtime(&timestamp);
    tm_info->tm_hour = 0;
    tm_info->tm_min = 0;
    tm_info->tm_sec = 0;

    // 将 tm 结构体重新转换为 time_t
    return timegm(tm_info);
}

bool is_same_week_ctime(time_t t1, time_t t2) {
    return get_utc_monday_of_week(t1) == get_utc_monday_of_week(t2);
}

int main() {
    time_t now = time(nullptr);
    time_t three_days_later = now + 3 * 24 * 60 * 60;
    time_t ten_days_later = now + 10 * 24 * 60 * 60;

    std::cout << "t1 和 t2 是否在同一周？ " 
              << (is_same_week_ctime(now, three_days_later) ? "是" : "否") << std::endl;
    std::cout << "t1 和 t3 是否在同一周？ " 
              << (is_same_week_ctime(now, ten_days_later) ? "是" : "否") << std::endl;

    return 0;
}
```

