## 统计概率—30万人，抽1一万人，写一个生成[0,2^16-1]的16位字符的函数



```cpp
#include <iostream>
#include <vector>
#include <string>
#include <random>
#include <numeric>
#include <algorithm>
#include <exception>


constexpr int MAX_NUM = 65536;

class CodeGenerator {
public: 
    CodeGenerator(): curIdx(0) {
        codes.resize(MAX_NUM);
        std::iota(codes.begin(), codes.end(), 0);

        std::random_device rd;
        std::mt19937 gen(rd());
        std::shuffle(codes.begin(), codes.end(), gen);
    }

    std::string generateCode() {
        if (curIdx >= codes.size()) {
            throw std::runtime_error("No more codes available");
        }

        uint16_t code_val = codes[curIdx++];
        return std::to_string(code_val);
    }

private:
    std::vector<int> codes;
    int curIdx;
};


int main() {
    try {
        CodeGenerator generator;
        const int num_to_generate = 10000;
        std::vector<std::string> generated_codes;
        generated_codes.reserve(num_to_generate);

        std::cout << "Generating " << num_to_generate << " unique codes..." << std::endl;
        for (int i = 0; i < num_to_generate; ++i) {
            generated_codes.push_back(generator.generateCode());
        }

        // 打印前10个作为示例
        std::cout << "First 10 generated codes:" << std::endl;
        for (int i = 0; i < 10; ++i) {
            std::cout << generated_codes[i] << std::endl;
        }

        // 验证唯一性（在实际应用中可以用std::unordered_set）
        std::cout << "\nTotal codes generated: " << generated_codes.size() << std::endl;

    } catch (const std::exception& e) {
        std::cerr << "Error: " << e.what() << std::endl;
    }

    return 0;
}
```

